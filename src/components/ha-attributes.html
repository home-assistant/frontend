<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../util/hass-util.html">

<dom-module id="ha-attributes">
  <template>
    <style is="custom-style" include="iron-flex iron-flex-alignment"></style>
    <style>
      .data-entry .value {
        max-width: 200px;
      }
      .attribution {
        color: var(--secondary-text-color);
        text-align: right;
      }
    </style>

    <div class='layout vertical'>
      <template is='dom-repeat' items="[[computeDisplayAttributes(stateObj, extraFilters)]]" as="attribute">
        <div class='data-entry layout justified horizontal'>
          <div class='key'>[[formatAttribute(attribute)]]</div>
          <div class='value'>[[formatAttributeValue(stateObj, attribute)]]</div>
        </div>
      </template>
      <div class='attribution' hidden$='[[!computeAttribution(stateObj)]]'>[[computeAttribution(stateObj)]]</div>
    </div>
  </template>
</dom-module>

<script>
(function () {
  'use strict';

  var FILTER_KEYS = [
    'entity_picture', 'friendly_name', 'icon', 'unit_of_measurement',
    'emulated_hue', 'emulated_hue_name', 'haaska_hidden', 'haaska_name',
    'homebridge_hidden', 'homebridge_name', 'supported_features', 'attribution',
  ];
  Polymer({
    is: 'ha-attributes',
    properties: {
      stateObj: {
        type: Object,
      },
      extraFilters: {
        type: String,
        value: '',
      },
    },
    computeDisplayAttributes: function (stateObj, extraFilters) {
      return window.hassUtil.computeDisplayAttributes(stateObj, FILTER_KEYS + extraFilters.split(','));
    },
    formatAttribute: function (attribute) {
      return window.hassUtil.formatAttribute(attribute);
    },
    formatAttributeValue: function (stateObj, attribute) {
      return window.hassUtil.formatAttributeValue(stateObj, attribute);
    },
    computeAttribution: function (stateObj) {
      return window.hassUtil.computeAttribution(stateObj);
    },
  });
}());
</script>
