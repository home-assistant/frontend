<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel='import' href='../../bower_components/iron-media-query/iron-media-query.html'>
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">

<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">

<link rel="import" href="../../src/components/ha-menu-button.html">
<link rel="import" href="../../src/resources/ha-style.html">

<link rel="import" href="./ha-config-section.html">
<link rel="import" href="./ha-call-service-button.html">

<dom-module id="ha-config-section-core">
  <template>
    <style include="iron-flex ha-style">
      .header {
        font-size: 16px;
        margin-bottom: 1em;
      }

      .header .status {
        font-size: 14px;
        float: right;
      }

      .card-actions.warning ha-call-service-button {
        color: var(--google-red-500);
      }
    </style>
    <ha-config-section
      narrow='[[narrow]]'
      show-menu='[[showMenu]]'
    >
      <span slot='header'>Server Management</span>
      <span slot='introduction'>
        Changing your configuration can be a tiresome process. We know. This section will try to make your life a little bit easier.
      </span>

      <paper-card heading='Configuration Reloading'>
        <div class='card-content'>
          Some parts of Home Assistant can reload without requiring a restart. Hitting reload will unload their current configuration and load the new one.
        </div>
        <div class='card-actions'>
          <ha-call-service-button
            hass='[[hass]]'
            domain='homeassistant'
            service='reload_core_config'
          >Reload Core</ha-call-service-button>
          <ha-call-service-button
            hass='[[hass]]'
            domain='group'
            service='reload'
            hidden$='[[!groupLoaded(hass)]]'
          >Reload Groups</ha-call-service-button>
          <ha-call-service-button
            hass='[[hass]]'
            domain='automation'
            service='reload'
            hidden$='[[!automationLoaded(hass)]]'
          >Reload automation</ha-call-service-button>
        </div>
      </paper-card>

      <paper-card heading='Server Management'>
        <div class='card-content'>
          Control your Home Assistant serverâ€¦ from Home Assistant.
        </div>
        <div class='card-actions warning'>
          <ha-call-service-button
            hass='[[hass]]'
            domain='homeassistant'
            service='restart'
          >Restart</ha-call-service-button>
          <ha-call-service-button
            hass='[[hass]]'
            domain='homeassistant'
            service='stop'
          >Stop</ha-call-service-button>
        </div>
      </paper-card>

    </ha-config-section>
  </template>
</dom-module>

<script>
Polymer({
  is: 'ha-config-section-core',

  properties: {
    hass: {
      type: Object,
    },

    narrow: {
      type: Boolean,
    },

    showMenu: {
      type: Boolean,
      value: false,
    },
  },

  groupLoaded: function (hass) {
    return window.hassUtil.isComponentLoaded(hass, 'group');
  },

  automationLoaded: function (hass) {
    return window.hassUtil.isComponentLoaded(hass, 'automation');
  },
});
</script>
